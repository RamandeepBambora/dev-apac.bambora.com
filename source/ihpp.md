---
title: dev/bambora

language_tabs:
  - shell: cURL

toc_above:
- <a href='index.html'>Getting Started</a>
- <span>APIs</span>
- <a href='direct_using_api.html'>Payment</a>
- <span>Hosted Payment Page</span>
- <a href='hpp.html'>HPP</a>
- <a href='ihpp.html'>iHPP</a>
includes:

toc_below:

search: false
---

<script src='js/vendor/clipboard.min.js'></script>
<script src='js/copy.js'></script>

# Overview

Thanks for visiting the Bambora Developer Portal. Here, we’ve outlined how you can start processing online payments. If you have any questions or require assistance, don’t hesitate to get in touch!

Processing online transactions via iHPP requires the following sequence:

1. Session Initiation
2. Payment Page and Transaction Processing

Let’s go!

# Session Initiation

```shell
curl "https://demo.ippayments.com.au/access/index.aspx" \
-d 'UserName=[Username]'
-d 'Password=[Password]'
-d 'DL=[DirectLink]'
-d 'SessionID=RandomString'
-d 'Amount=1000'
-d 'CustRef=1'
```

Firstly, the POST generated by your server is submitted to the Bambora server URL.

**BODY SCHEMA**

Parameter |         | Description
--------- | ------- | -----------
Username | string(16) | API Username
Password | string(16) | API Password
Amount | Numeric | Amount entered in cent value e.g. $55.00 = 5500
SessionID | string(64) | Merchant’s unique session identifier. Maintain this session identifier throughout the life of the transaction.
SessionKey | string(512) | Generated by the merchant, can be any value e.g. random generated number, timestamp etc. The session key is to be included for security and authentication purposes. This Key should only be passed to Bambora’s server and should not be sent to your front end. Bambora will return the SessionKey to your ServerURL in the transaction response once the payment has been processed. If you do not receive a SessionKey or receive an invalid SessionKey, then this should be treated as a possible fraudulent transaction. Bambora needs to be notified of this event along with your internal teams for investigation.
ServerURL | string(512) | This value must be Base 64 encoded. The URL of your server that Bambora will POST the first notification to including the transaction result data. If you do not require data to be sent to the ServerURL, please leave this field empty.
DL | string(16) | This value is used to specify the styling and functionality Bambora should display to your customer. Please see section Payment Page Functionality for full details on DL value. Dl values will be confirmed by Bambora upon account setup.
AccountNumber | string(16) Optional | This value dictates which account the transaction will be processed through. Refer to section Account Hierarchy. If this value is not populated, the transaction will be processed to the account tied to the username field.
CustRef | string(64) | A reference for the transaction sent by you for reporting purposes.
CustNumber | string(64) Optional | An additional reference for the transaction sent by you for reporting purposes.
Email | string(64) Optional | An additional reference for the transaction sent by you for reporting purposes. Please note Bambora can enable this field to send an email receipt to the email address entered in this field. Please contact Bambora if you require this service.
Reference1 | string(32) Optional | This field name can be changed to something more suitable to your company for example “AccountID”. Please advise if you wish to change it. An additional reference that can be sent by you for reporting purposes e.g. a customer identifier unique to your system. This will be available to view and download with the transaction details in our reporting tool, PRM.
Reference2 | string(64) Optional | This field name can be changed to something more suitable to your company for example “AccountID”. Please advise if you wish to change it. An additional reference that can be sent by you for reporting purposes e.g. a customer identifier unique to your system. This will be available to view and download with the transaction details in our reporting tool, PRM.
Reference3 | string(128) Optional | This field name can be changed to something more suitable to your company for example “AccountID”. Please advise if you wish to change it. An additional reference that can be sent by you for reporting purposes e.g. a customer identifier unique to your system. This will be available to view and download with the transaction details in our reporting tool, PRM.
Reference4 | string(1024) Optional | This field name can be changed to something more suitable to your company for example “AccountID”. Please advise if you wish to change it. An additional reference that can be sent by you for reporting purposes e.g. a customer identifier unique to your system. This will be available to view and download with the transaction details in our reporting tool, PRM.
Reference5 | string(1024) Optional | This field name can be changed to something more suitable to your company for example “AccountID”. Please advise if you wish to change it. An additional reference that can be sent by you for reporting purposes e.g. a customer identifier unique to your system. This will be available to view and download with the transaction details in our reporting tool, PRM.
UserDeclinedURL | string(512) Optional | Bambora offer the ability to have a cancel button on your payment page. By default this page will redirect to the UserURL. If you wish this button to redirect to a different page other than the UserURL, you can specify the UserDeclinedURL in this field. If your customer selects the cancel button on the payment page, the page will be redirected to the declined URL. Please note if you send a value in this field, all responses for declined transactions will be sent to this URL including cancelled transactions and transactions which have been declined by the bank. Please see section Cancel Button for further information.


**RESPONSE SCHEMA**

Parameter |         | Description
--------- | ------- | -----------
SessionStored | string(64) | Value that can be either True or False
SessionStoredError | string(256) | Textual description of the error. This field will only be populated if the SessionStored value is False.
SST | string(64) | Secure Session Token.  This field will only be populated if the SessionStored value is True.






# Payment Page and Transaction Processing

```shell
curl "https://demo.ippayments.com.au/access/index.aspx" \
-d 'SessionID=[SessionID]'
-d 'SST=[SST]'
```

Great, you’re onto the next part of the sequence.

Once the session is established and working, your backend application notifies your website which then POSTs (GET also supported) the Session ID and Secure Session Token to Bambora’s server URL.

**BODY SCHEMA**

Parameter |         | Description
--------- | ------- | -----------
SessionStored | string(64) | Value that can be either True or False
SST | string(64) | Secure Session Token.  This field will only be populated if the SessionStored value is True.

With the SST and Session ID, redirect the user to the hosted payment page at this URL: [https://demo.ippayments.com.au/access/index.aspx](https://demo.ippayments.com.au/access/index.aspx).
You can perform this redirection in an iFrame or just redirect the entire site.

Your customer will be required to enter the following payment details into the payment form.

* Cardholder name
* Card number
* Security Code (CVV)
* Expiry date

**RESPONSE SCHEMA**

You should expect two responses back from Bambora.

***1st response***

The Bambora server POSTs the response to your server using the ‘ServerURL’ as supplied by you in the session initiation. The following table lists the response values that Bambora will POST to your server. The response data should be stored in your database and made accessible to your website.

Parameter |         | Description
--------- | ------- | -----------
Result | string(1) | 0 = Declined 1 = Approve 2 = In progress 3 = Session Expired
Receipt | string(8) | The Bambora receipt number generated for this transaction
DeclinedCode | string(5) | Declined code interprets the error message
DeclinedMessage | string(256) | Reason message for declined
SST | string(64) | The Secure Session Token.
SessionKey | string(64)	| The session key submitted by you only to Bambora in the session initiation request.
SessionId | string(64) | Merchant unique session identifier
MaskedCard | string(16)	| The masked credit card number. This will show first 6 and last 4 digits of card number. E.g. 123456*****4321
ExpiryDate | string(5)	| The credit card expiry date. Format: MM/YY
CardHolderName | string(64)	| The credit card expiry date. Format: MM/YY
CardType | string(16) |	E.g. MasterCard, Visa, American Express, Diners
CardSubType | string(64)	| A value can be passed back giving further details on the card. This field is only returned if you have the CardSubType functionality enabled. Please see section Card SubType Recognition for further information.
TxDateTime | string(19)	| The transaction date/time. Format: YYYY-MM-DD HH:MM:SS E.g. 2010-01-20 18:32:30
CustNumber | string(64)	| An additional reference for the transaction sent by you for reporting purposes.
CustRef | string(64) | Merchant Reference for the transaction
Amount | string(10)	| Transaction amount in cent value e.g. $55.00 = 5500. This is the originally submitted amount and does not include any surcharge amount that may have been applied by Bambora.
Surcharge | string(10) | Surcharge amount applied to the transaction in cent value. This is only populated if surcharging is enabled on your account. Please see section Surcharging for further information.
Totalamount | string(10) |	Transaction amount plus surcharge amount applied to the transaction in cent value. This is only populated if surcharging is enabled on your account. Please see section Surcharging for further information.
SettlementDate | string(64) |	The settlement date of the transaction returned in the following format YYYY-MM-DD.
Reference1 | string(32)	| Additional optional reference submitted by you in the transaction request.
Reference2 | string(64)	| Additional optional reference submitted by you in the transaction request.
Reference3 | string(128)	| Additional optional reference submitted by you in the transaction request.
Reference4 | string(256)	| Additional optional reference submitted by you in the transaction request.
Reference5 | string(1024)	| Additional optional reference submitted by you in the transaction request.
Acctitle | string(60)	| Bank account holder name.
AccRouting | string(6)	| Bank account BSB. For NZ direct debit processing, this will include Bank and Branch Codes
Accno | string(16) | Bank account number. For NZ direct debit processing, this will include NZ Account number and Suffix


***2nd response***

Bambora redirect to the ‘UserURL’ as supplied in the Session Initiation request and POST’s the SessionID and SST. Your UserURL page can use these details to access the transaction results stored in your database from the first notification.

The following table lists the values that Bambora will POST to your server when redirecting to your UserURL.

Parameter |         | Description
--------- | ------- | -----------
SessionStored | string(64) | Value that can be either True or False
SST | string(64) | Secure Session Token.  This field will only be populated if the SessionStored value is True.

Once your UserURL page receives the transaction result, it can display the details to the customer.

And you’re done.
